<div class="col-12 col-md-4 h-100">
    <div class="card h-100">
        <div class="card-header text-center bg-white">
            <h5 class="card-title"><%= title %></h5>
        </div>

        <div class="card-body p-2 overflow-auto">
            <% if(title === 'TODO') { %>
                <button id="new-task-button" class="btn btn-primary btn-block mb-3" onclick="showTaskPopup()">Ajouter</button>
            <% } %>
            <% tasks.forEach(function(task) { %>
            <div class="card mb-3 bg-light" style="cursor:pointer;" id="task-<%= task._id %>">
                <div class="card-body p-2">
                    <p><%= task.description %></p>
                    <% if (task.member) {
                         let member = projectMembers.find(m => m._id.toString() === task.member.toString());
                    %>
                    <div class="row align-items-center">
                        <div class="col">
                            <div class="progress" style="height: 5px;">
                                <div class="progress-bar" role="progressbar" style="width: 0;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="col-auto">
                            <div class="rounded-circle border member-avatar text-center"
                                 style="background-color: #<%= member.color %>;">
                                <%= member.name.substring(0, 1).toUpperCase(); %>
                            </div>
                        </div>
                    </div>
                    <% } %>
                    <a class="stretched-link" onclick="showEditTaskPopup(<%= JSON.stringify(task) %>)"></a>
                </div>
            </div>
            <% }) %>
        </div>
    </div>
</div>
